/*!
 * Salvattore 1.0.5 by @rnmp and @ppold
* https://github.com/rnmp/salvattore
* Licensed under the MIT license.
* Copyright (c) 2013-2014 Rolando Murillo and Giorgio Leveroni
*/!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.salvattore=t()}(this,function(){/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas, David Knight. Dual MIT/BSD license *//*! matchMedia() polyfill addListener/removeListener extension. Author & copyright (c) 2012: Scott Jehl. Dual MIT/BSD license */window.matchMedia||(window.matchMedia=function(){"use strict";if(t=window.styleMedia||window.media,!t){var t,e=document.createElement("style"),n=document.getElementsByTagName("script")[0],s=null;e.type="text/css",e.id="matchmediajs-test",n.parentNode.insertBefore(e,n),s="getComputedStyle"in window&&window.getComputedStyle(e,null)||e.currentStyle,t={matchMedium:function(t){var n="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return e.styleSheet?e.styleSheet.cssText=n:e.textContent=n,"1px"===s.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),function(){"use strict";if(window.matchMedia&&window.matchMedia("all").addListener)return!1;var t=window.matchMedia,o=t("only all").matches,n=!1,s=0,e=[],i=function(){clearTimeout(s),s=setTimeout(function(){for(n=0,i=e.length;i>n;n++){var n,o,i,c,s=e[n].mql,a=e[n].listeners||[],r=t(s.media).matches;if(r!==s.matches){s.matches=r;for(o=0,c=a.length;c>o;o++)a[o].call(window,s)}}},30)};window.matchMedia=function(s){var r=t(s),a=[],c=0;return r.addListener=function(t){o&&(n||(n=!0,window.addEventListener("resize",i,!0)),0===c&&(c=e.push({mql:r,listeners:a})),a.push(t))},r.removeListener=function(e){for(var t=0,n=a.length;n>t;t++)a[t]===e&&a.splice(t,1)},r}}(),function(){"use strict";for(var n=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var t=(new Date).getTime(),s=Math.max(0,16-(t-n)),o=window.setTimeout(function(){e(t+s)},s);return n=t+s,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),"function"!=typeof window.CustomEvent&&!function(){"use strict";function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}();var e=function(e,t){"use strict";var n={},i=[],s=[],o=[],a=function(e,t,n){e.dataset?e.dataset[t]=n:e.setAttribute("data-"+t,n)};return n.obtainGridSettings=function(t){var a=e.getComputedStyle(t,":before"),i=a.getPropertyValue("content").slice(1,-1),n=i.match(/^\s*(\d+)(?:\s?\.(.+))?\s*$/),s=1,o=[];return n?(s=n[1],o=n[2],o=o?o.split("."):["column"]):(n=i.match(/^\s*\.(.+)\s+(\d+)\s*$/),n&&(o=n[1],s=n[2],s&&(s=s.split(".")))),{numberOfColumns:s,columnClasses:o}},n.addColumns=function(e,s){for(var i,r=n.obtainGridSettings(e),o=r.numberOfColumns,u=r.columnClasses,c=new Array(+o),l=t.createDocumentFragment(),d=o;0!==d--;)i="[data-columns] > *:nth-child("+o+"n-"+d+")",c.push(s.querySelectorAll(i));c.forEach(function(e){var n=t.createElement("div"),s=t.createDocumentFragment();n.className=u.join(" "),Array.prototype.forEach.call(e,function(e){s.appendChild(e)}),n.appendChild(s),l.appendChild(n)}),e.appendChild(l),a(e,"columns",o)},n.removeColumns=function(n){o=t.createRange(),o.selectNodeContents(n);var s,o,i=Array.prototype.filter.call(o.extractContents().childNodes,function(t){return t instanceof e.HTMLElement}),r=i.length,l=i[0].childNodes.length,c=new Array(l*r);return Array.prototype.forEach.call(i,function(e,t){Array.prototype.forEach.call(e.children,function(e,n){c[n*r+t]=e})}),s=t.createElement("div"),a(s,"columns",0),c.filter(function(e){return!!e}).forEach(function(e){s.appendChild(e)}),s},n.recreateColumns=function(t){e.requestAnimationFrame(function(){n.addColumns(t,n.removeColumns(t));var e=new CustomEvent("columnsChange");t.dispatchEvent(e)})},n.mediaQueryChange=function(e){e.matches&&Array.prototype.forEach.call(i,n.recreateColumns)},n.getCSSRules=function(e){var t;try{t=e.sheet.cssRules||e.sheet.rules}catch{return[]}return t||[]},n.getStylesheets=function(){return Array.prototype.concat.call(Array.prototype.slice.call(t.querySelectorAll("style[type='text/css']")),Array.prototype.slice.call(t.querySelectorAll("link[rel='stylesheet']")))},n.mediaRuleHasColumnsSelector=function(e){try{t=e.length}catch{t=0}for(var t,n;t--;)if(n=e[t],n.selectorText&&n.selectorText.match(/\[data-columns\](.*)::?before$/))return!0;return!1},n.scanMediaQueries=function(){var i,t=[];e.matchMedia&&(n.getStylesheets().forEach(function(e){Array.prototype.forEach.call(n.getCSSRules(e),function(e){e.media&&e.cssRules&&n.mediaRuleHasColumnsSelector(e.cssRules)&&t.push(e)})}),i=s.filter(function(e){return-1===t.indexOf(e)}),o.filter(function(e){return-1!==i.indexOf(e.rule)}).forEach(function(e){e.mql.removeListener(n.mediaQueryChange)}),o=o.filter(function(e){return-1===i.indexOf(e.rule)}),t.filter(function(e){return-1==s.indexOf(e)}).forEach(function(t){var s=e.matchMedia(t.media.mediaText);s.addListener(n.mediaQueryChange),o.push({rule:t,mql:s})}),s.length=0,s=t)},n.rescanMediaQueries=function(){n.scanMediaQueries(),Array.prototype.forEach.call(i,n.recreateColumns)},n.nextElementColumnIndex=function(e,t){var n,s,i,a=e.children,c=a.length,o=0,r=0;for(n=0;c>n;n++)i=a[n],s=i.children.length+(t[n].children||t[n].childNodes).length,0===o&&(o=s),o>s&&(r=n,o=s);return r},n.createFragmentsList=function(e){for(var s=new Array(e),n=0;n!==e;)s[n]=t.createDocumentFragment(),n++;return s},n.appendElements=function(e,t){var o=e.children,i=o.length,s=n.createFragmentsList(i);Array.prototype.forEach.call(t,function(t){var o=n.nextElementColumnIndex(e,s);s[o].appendChild(t)}),Array.prototype.forEach.call(o,function(e,t){e.appendChild(s[t])})},n.prependElements=function(e,s){var a,l,r=e.children,o=r.length,c=n.createFragmentsList(o),i=o-1;s.forEach(function(e){var t=c[i];t.insertBefore(e,t.firstChild),0===i?i=o-1:i--}),Array.prototype.forEach.call(r,function(e,t){e.insertBefore(c[t],e.firstChild)});for(a=t.createDocumentFragment(),l=s.length%o;0!==l--;)a.appendChild(e.lastChild);e.insertBefore(a,e.firstChild)},n.registerGrid=function(s){if("none"!==e.getComputedStyle(s).display){if(jQuery(s).children(".column").length>0)return;var o,r=t.createRange();r.selectNodeContents(s),o=t.createElement("div"),o.appendChild(r.extractContents()),a(o,"columns",0),n.addColumns(s,o),i.push(s)}},n.init=function(){var s,e=t.createElement("style");e.innerHTML="[data-columns]::before{visibility:hidden;position:absolute;font-size:1px;}",t.head.appendChild(e),s=t.querySelectorAll("[data-columns]"),Array.prototype.forEach.call(s,n.registerGrid),n.scanMediaQueries()},n.init(),{appendElements:n.appendElements,prependElements:n.prependElements,registerGrid:n.registerGrid,recreateColumns:n.recreateColumns,rescanMediaQueries:n.rescanMediaQueries,append_elements:n.appendElements,prepend_elements:n.prependElements,register_grid:n.registerGrid,recreate_columns:n.recreateColumns,rescan_media_queries:n.rescanMediaQueries}}(window,window.document);return e})